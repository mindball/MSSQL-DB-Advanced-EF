using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;


namespace ChangeDirectoryName
{
    class Program
    {
        static void Main(string[] args)
        {
            string path = @"D:\emag\rename\hpCount";

            //RenameFolder(path);

            RenameFiles(path);

        }

        public static void RenameFiles(string path)
        {
            var directoryPath = Directory.GetDirectories(path);

            foreach (var directory in directoryPath)
            {
                DirectoryInfo d = new DirectoryInfo(directory);

                FileInfo[] fileInfos = d.GetFiles();
                
                if (fileInfos.Count() > 1)
                {
                    int count = 0;

                    foreach (var file in fileInfos)
                    {
                        RenameFile(file, d, count);
                        count++;
                    }
                }
                else
                {
                    RenameFile(fileInfos[0], d);
                }
            }

        }

        public static void RenameFolder(string path)
        {     
            var directoryPath = Directory.GetDirectories(path);

            List<string> oe = new List<string>()
            {
                "191837402",
"161953235B",
"171959511",
"191837187",
"191837401",
"191837401B",
"191837402B",
"191905855",
"191941531H",
"191941531K",
"191941535B",
"191953513B",
"191953519",
"191959621B",
"191959855",
"193839401",
"193839402",
"1H0837187A",
"1H0837401B",
"1H0837402B",
"1H0905855A",
"1H0953513C",
"1H0953519",
"1H0959621B",
"1H4839401E",
"1H4839402E",
"1H6941532",
"1L0837401",
"1L0837402",
"251941531M",
"321941531K",
"321953513",
"321953519D",
"321959511A",
"327837015B",
"327837016B",
"327839015B",
"327839015B",
"327839016B",
"357837187",
"357905855B",
"357941531",
"357953513F",
"357953519",
"3A0837401B",
"3A0837402B",
"3A0839402F",
"6N0947563",
"6N0953513",
"6N3837402E",
"6N4837401",
"6N4837402",
"701837501B",
"701837502B",
"701953513",
"701953519",
"893905855A",
"443953513L",
"445953503E",
"1H0837461A",
"1H0837462A",
"4A0959855A",
"4B0953503E",
"6N3837401E",
"4B0953503F",
"893862055",
"8L0953513J",
"8L0953513G",
"6N0953519B",
"1J3837461DS",
"1J3837462DS",
"1J4837461DS",
"1J4837462DS",
"1H4839461A",
"1H4839462A",
"1J0953235J",
"3B0959621C",
"3B0953235E",
"3B0953235D",
"3A0947561A",
"8L0941509G",
"1H1857131",
"4A1905855",
"323941531G",
"7D0953519",
"7D0953513B",
"4B0953503G",
"4B0953503H",
"1J1959565E",
"1C0941531A",
"8E0941531",
"4E0953513A",
"4E0953521",
"1K0953513E",
"4A0837461A",
"4B0837461",
"4B0837462",
"8D0837461",
"8D0837462",
"6X1837013H",
"6X1837014H",
"3A0837461",
"3A0837462",
"3B1837462",
"3B1837461",
"1J6827505C",
"1J9827505",
"5K0827505C",
"4F5827505D",
"6U0945515A",
"4F0805121",
"357827571E",
"6K4837401M",
"6K4837402M",
"6K4837401P",
"6K4837402P",
"1U0837461B",
"1U0837462B",
"6Q4837461FS",
"6Q4837461JS",
"6Q4837462JS",
"6Q3837461JS",
"1T1837461BS",
"1T1837462BS",
"7M0837461",
"7M0837462",
"8E0837461B",
"8E0837462B",
"191827571E",
"1L0837401B",
"1L0837402B",
"6K3837401HS",
"8L3837461",
"8L3837462",
"1M0837461",
"1M0837462",
"6L3837462",
"6N3837461",
"6N3837462",
"6N4837461",
"6N4837462",
"6Y1837461",
"6Y1837462",
"8P3837461B",
"8P3837462B",
"8P4837461B",
"8P4837462B",
"701837501F",
"0015404645",
"1J4959857D",
"8E0839461C",
"8E0839462C",
"1K0941431AS",
"3D1837015AP",
"3D1837016AC",
"1U0837168A",
"4E0953513K",
"7L0837462F",
"8E0839015C",
"8E0839016C",
"3A0827571D",
"5P0837461",
"8D0941509H",
"8E0941531B",
"1J1959565F",
"1U1959565L",
"6Y1959565F",
"6Y0959855",
"1J4959857C",
"8L4837461",
"8L4837462",
"7L6959855B",
"8E0959855A",
"5J4837461",
"5J4837462",
"3B9839461A",
"3B9839462A",
"1U0839461B",
"1U0839462B",
"6Q0959858",
"6Q0959858A",
"6N0953235B",
"6Q0953513D",
"4B0959851B",
"06H103495AC",
"1K3959857C",
"1J3959857B",
"7E1837015A",
"7E1837016A",
"3C1837015B",
"8K0839015",
"8K0839016",
"3C8941431B",
"036103464AH",
"7L0839015E",
"7L0839016E",
"7H1955603A",
"8R1962107A",
"8E0959851D",
"8E0959565A",
"1Z0959858B",
"7P6837461B",
"7P6837462B",
"1J0959831A",
"05A103495",
"06H103495AE",
"5K1837015H",
"5K1837016H",
"5N1837015M",
"5N1837016M",
"1P1837015",
"1P1837016",
"5J1837015",
"5J1837016",
"3C1837015A",
"3C1837016A",
"8J1837015A",
"8J1837016A",
"6R0711202",
"7L6959857E",
"133384",
"133396",
"133414",
"140107",
"140108",
"913614",
"913684",
"1240134",
"1240126",
"1241131",
"1241212",
"1241655",
"1241656",
"1241658",
"6240138",
"6240140",
"913653",
"913694",
"1241259",
"6240141",
"6240241",
"5133009",
"5133013",
"6240097",
"6240157",
"1241210",
"6240240",
"6240289",
"4419587",
"1248800320",
"1027166",
"1070574",
"1052252",
"6993548",
"4053329",
"4832217",
"1423796",
"1264600604",
"1245402044",
"2025402144",
"2105400144",
"1245401045",
"2085450010",
"1247201746",
"1248204510",
"1268208010",
"1268208110",
"2015452524",
"2105450110",
"9017201446",
"2024600704",
"2035400253",
"1247200346",
"1247200446",
"6461880301",
"2107301546",
"2107301646",
"6460101462",
"6460101562",
"51337020659",
"51337020660",
"51338252393",
"51338252394",
"51338254912",
"51337039451",
"51358212099",
"51358212100",
"51357125059",
"51357125060",
"51358159835",
"51358159836",
"51357140589",
"51357140590",
"11127793164",
"51248168035",
"11617526654",
"51357166381",
"51357166382",
"51217202143",
"51217202146",
"255400337R",
"7700834347",
"6253.68",
"ACR366",
"ACR365A",
"1348616",
"1487860",
"4556.24",
"4055851",
"1433957",
"1371391",
"6150950",
"6087586",
"BSG30-251-015",
"4055818",
"4387350",
"1044659",
"6183031",
"6189055",
"7333650",
"1250328",
"5182969/5182970",
"1331616/1331617",
"1090806",
"1090807",
"1030918",
"6168146",
"1767202",
"4375255",
"1457997",
"6161843",
"6948745",
"6948745",
"1090806",
"1090807",
"1494053",
"1493202",
"92VB89302K02",
"1494102",
"1488638",
"1494080",
"1494057",
"6760438",
"1494102",
"4956236",
"0004210850",
"1234200073",
"1633200032",
"0007601359",
"9017600459",
"9017601361",
"9017200066",
"9017200166",
"0007600161",
"0007430372",
"9067600161",
"9067600261",
"9067600170",
"0007201235",
"9017301135",
"9017201135",
"9017301335",
"9067600070",
"9017201035",
"758947"

            };

            List<string> hp = new List<string>()
            {

                "102887756",
"102542755",
"102691756",
"102877755",
"102885756",
"102886756",
"102888756",
"102926755",
"102942755",
"102943755",
"102944755",
"102964755",
"102965755",
"102978755",
"102979755",
"102991756",
"102992756",
"103094755",
"103099755",
"103100755",
"103112755",
"103132756",
"103133755",
"103141755",
"103156755",
"103157755",
"103169755",
"103177755",
"103178755",
"103329755",
"103422755",
"103425755",
"103426755",
"103428755",
"103430755",
"103431755",
"103432755",
"103432756",
"103433755",
"103543545",
"103560755",
"103569755",
"103576756",
"103577756",
"103590755",
"103591755",
"103594755",
"104035756",
"104036756",
"104044755",
"104045755",
"104046755",
"104098755",
"104099755",
"104114756",
"104115755",
"107090755",
"107269755",
"107273755",
"107387755",
"107389755",
"107555755",
"107833755",
"107836755",
"108584755",
"108611755",
"108659755",
"108660755",
"108663755",
"108668755",
"108669755",
"108670755",
"108671755",
"108672755",
"108673755",
"108880755",
"108882755",
"108884755",
"108885755",
"108887756",
"108893755",
"109078756",
"109081755",
"109082755",
"109084755",
"109086755",
"109132755",
"109133755",
"109774755",
"109928755",
"109929755",
"110108755",
"110110755",
"110111755",
"110449755",
"110451755",
"110452755",
"110453755",
"110454755",
"110551755",
"110552755",
"110556755",
"110557755",
"110558755",
"110559755",
"110944755",
"110945755",
"110946755",
"110950755",
"111069755",
"111107375",
"111128755",
"111253755",
"111254755",
"111255755",
"111256755",
"111257755",
"111258755",
"111259755",
"111263755",
"111264755",
"111265755",
"111271755",
"111272755",
"111273755",
"111274755",
"111275755",
"111276755",
"111309755",
"111693755",
"111694755",
"111695755",
"111697755",
"111698755",
"111699755",
"111700755",
"111704546",
"111707755",
"111708755",
"111709755",
"111710755",
"111711755",
"111712755",
"111713755",
"111714755",
"111715755",
"111716755",
"111717755",
"112135755",
"112408755",
"113180755",
"113181755",
"113462755",
"113509755",
"113510755",
"113572755",
"113580755",
"113610755",
"113819755",
"113820755",
"114118755",
"114179755",
"114257755",
"114264755",
"114284755",
"114285755",
"114286755",
"114288755",
"114289755",
"114433755",
"114434755",
"114570755",
"114573755",
"114647755",
"114648755",
"114679755",
"114680755",
"114711755",
"114712755",
"114738755",
"114739755",
"114743755",
"114744755",
"114753755",
"114985755",
"115116755",
"115117755",
"115141755",
"115142755",
"115147755",
"115151755",
"115152755",
"115165755",
"115405755",
"115647755",
"115648755",
"115693755",
"116020755",
"116021755",
"116026755",
"116040755",
"116083755",
"116084755",
"116214755",
"116431755",
"116670755",
"117731755",
"117732755",
"117735755",
"117736755",
"117739755",
"117740755",
"117741755",
"117742755",
"117743755",
"117744755",
"117745755",
"117746755",
"117851756",
"118018755",
"200020755",
"200021755",
"200022755",
"200035755",
"200036755",
"201793755",
"201794755",
"202167755",
"202169755",
"202185755",
"202193755",
"202197755",
"202198755",
"202199755",
"202200755",
"202201755",
"205166755",
"205654756",
"205687755",
"205688755",
"205690755",
"205810755",
"205811755",
"205900755",
"206214466",
"206216755",
"206683755",
"206844466",
"208451465",
"26211",
"301653755",
"302336755",
"302337755",
"302400755",
"302702755",
"302714055",
"304095755",
"400361756",
"400521755",
"400522755",
"400523755",
"400524755",
"400525755",
"401427755",
"401511755",
"401517755",
"401518755",
"401640755",
"401642755",
"401668755",
"401790755",
"408073755",
"408229755",
"408230755",
"408255755",
"408992755",
"408993755",
"409285755",
"409286755",
"501824755",
"501825755",
"501826755",
"501827755",
"501829755",
"501832755",
"502074755",
"502075755",
"502076755",
"502077755",
"502078755",
"502079755",
"502092755",
"502093755",
"502335755",
"502526786",
"502905755",
"503102755",
"503103755",
"623616755",
"623617755",
"638158755",
"700440755",
"722036755",
"BSG30-109-002",
"BSG30-109-004",
"BSG30-235-005",
"BSG30-235-006",
"BSG30-235-008",
"BSG30-251-003",
"BSG30-251-004",
"BSG30-251-005",
"BSG30-251-013",
"BSG30-251-014",
"BSG30-251-015",
"BSG30-251-016",
"BSG30-260-002",
"BSG30-370-002",
"BSG30-435-001",
"BSG30-435-005",
"BSG30-435-006",
"BSG30-922-063",
"BSG30-966-001",
"BSG30-966-003",
"BSG30-970-007",
"BSG30-970-008",
"BSG30-970-009",
"BSG30-970-010",
"BSG30-970-017",
"BSG30-970-018",
"BSG30-970-019",
"BSG30-970-022",
"BSG30-970-023",
"BSG30-970-033",
"BSG30-970-036",
"BSG30-970-037",
"BSG30-970-042",
"BSG30-970-043",
"BSG30-970-048",
"BSG30-970-050",
"BSG30-970-051",
"BSG30-970-052",
"BSG30-970-057",
"BSG30-975-005",
"BSG30-975-034",
"BSG30-975-047",
"BSG60-250-011",
"BSG60-260-005",
"BSG60-310-194",
"BSG60-970-001",
"BSG60-970-002",
"BSG60-970-004",
"BSG60-970-005",
"BSG60-970-006",
"BSG60-970-007",
"BSG60-970-009",
"BSG60-970-010",
"BSG60-970-011",
"BSG60-970-012",
"BSG60-975-008",
"BSG60-975-010",
"BSG60-975-011",
"BSG60-975-012",
"BSG60-975-032",
"BSG60-975-033",
"BSG65-465-006"

            };

            
            var dic = hp.Select((k, i) => new { k, v = oe[i] })
                .ToDictionary(x => x.k, x => x.v);


            foreach (var sDirectory in directoryPath)
            {
                var directory = new DirectoryInfo(sDirectory);
                var name = directory.Name.Replace(" ", string.Empty);

                if (dic.ContainsKey(name))
                {
                    string sourceDirectory = directory.FullName;
                    string destinationDirectory = directory.Parent + "\\" + dic[name];

                    try
                    {
                        Directory.Move(sourceDirectory, destinationDirectory);
                    }
                    catch (Exception e)
                    {
                        Console.WriteLine(e.Message);
                    }
                }
            }
        }

        private static void RenameFile(FileInfo fileInfos, 
            DirectoryInfo d, int countFiles = 0)
        {
            string extension;
            if(countFiles != 0)
                extension = "_" + countFiles + Path.GetExtension(fileInfos.ToString());
            else
                extension = Path.GetExtension(fileInfos.ToString());

            var directoryFullname = d.FullName;
            var directoryName = d.Name;

           
            string fullFilePathName = d.FullName + "\\"
                + d.Name
                + extension;

            if (fileInfos.FullName == fullFilePathName)
                return;

            File.Move(fileInfos.FullName, fullFilePathName);
        }

    }
}
